<?xml version="1.0"?>
<project name="LibGPS" default="copyToAddonFolder" basedir=".">
	<property name="version" value="2" />

	<property name="addonhome" location="${user.home}/Documents/Elder Scrolls Online/liveeu/AddOns" />
	<property name="addondir" location="${addonhome}/${ant.project.name}" />
	<property name="srcdir" location="${basedir}/../src" />
	<property name="tempdir" location="${basedir}/../temp" />
	<property name="targetdir" location="${basedir}/../target" />

	<target name="copyToAddonFolder">
		<delete dir="${addondir}" />
		<copy todir="${addondir}">
			<fileset dir="${srcdir}" />
		</copy>
		<replace file="${addondir}/${ant.project.name}.txt" token="VERSION_NUMBER" value="development" />
		<replace file="${addondir}/${ant.project.name}/${ant.project.name}.lua" token="VERSION_NUMBER" value="999" />
	</target>

	<target name="createArchive">
		<delete includeemptydirs="true" dir="${tempdir}" />
		<buildnumber file="build.number" />

		<copy todir="${tempdir}/${ant.project.name}">
			<fileset dir="${srcdir}" />
		</copy>

		<replace file="${tempdir}/${ant.project.name}/${ant.project.name}.txt" token="VERSION_NUMBER" value="${version}.${build.number}" />
		<replace file="${tempdir}/${ant.project.name}/${ant.project.name}/${ant.project.name}.lua" token="VERSION_NUMBER" value="${version}.${build.number}" />

		<zip destfile="${targetdir}/${ant.project.name}v${version}_${build.number}.zip">
			<fileset dir="${tempdir}" />
		</zip>
		<delete includeemptydirs="true" dir="${tempdir}" />
	</target>
</project>